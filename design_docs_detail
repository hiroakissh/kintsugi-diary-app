# 一日一色 × Kintsugi Diary（画面詳細設計）

## 1. ホーム画面（HomeView）

### 目的
- 今日の感情を色で記録
- 辛い出来事を日記として入力
- 直近1週間のグラデーションを確認
- 金継ぎひび割れ生成と過去ブルーリンク判定を行う

### UI構成

| UI要素 | コンポーネント | 詳細 |
|--------|----------------|------|
| 今日の色選択 | ColorPicker | ネガティブ/ポジティブカテゴリ別でプリセットも提供 |
| 辛い出来事入力 | TextEditor | 入力時にひび割れ生成 |
| 最近1週間グラデーション | HStack + ForEach | タイル表示、タップで詳細画面遷移 |
| 保存ボタン | Button | DailyEntry保存 & 金継ぎ処理開始 |

### データフロー
入力された色・痛み → DailyEntry生成/更新
│
├─> crackGenerated = true
├─> 過去ブルー日とのリンク判定
└─> healedProgress更新

yaml
コードをコピーする

### アニメーション
- 入力時にひび割れプレビュー表示
- 保存ボタン押下で、ひび割れが徐々に伸びる演出（Canvas）

---

## 2. 金継ぎ日記詳細画面（KintsugiDetailView）

### 目的
- 日記内容を表示
- 過去ブルー日が後続ポジティブによって金継ぎ化される様子を可視化
- reflectionText入力で光・花演出

### UI構成

| UI要素 | コンポーネント | 詳細 |
|--------|----------------|------|
| 日記テキスト | Text | painText表示 |
| ひび割れCanvas | Canvas | crackGeneratedに基づき描画 |
| 金線進行 | Canvas + Path | healedProgressに応じて線が伸びる |
| reflectionText入力 | TextEditor | 入力で光・花粒子アニメーション発生 |
| 過去ブルーリンク | TimelineView | 過去ブルー日が金色に変化する演出 |

### データフロー
DailyEntry参照 → crackGenerated/ healedProgress/ linkedPositiveDate 更新
reflectionText入力 → 粒子演出 & 過去ブルー日金継ぎ化

yaml
コードをコピーする

### アニメーション
- 金線進行: healedProgressを0→1にアニメーション
- 光・花: 粒子発火、ランダム方向に散布
- 過去ブルー日: 金線描画で強調

---

## 3. 年間グラデーションビュー（YearGradientView）

### 目的
- 365日分の感情の色を俯瞰
- 金継ぎ進行中の日を視覚化
- 過去ブルー日とポジティブ日を関連付けて確認

### UI構成

| UI要素 | コンポーネント | 詳細 |
|--------|----------------|------|
| タイルグリッド | LazyVGrid | 1日1タイル、色はDailyEntry.colorHex |
| 金線表示 | Canvas | healedProgressに応じて金線描画 |
| タップ遷移 | NavigationLink | タップでKintsugiDetailViewへ遷移 |

### データフロー
DailyEntry全件参照 → グリッド描画
金線進行は各DailyEntry.healedProgressに基づく

yaml
コードをコピーする

### アニメーション
- 金線進行をタイル上で描画
- 過去ブルー日リンクの演出をグリッド上でも表示可能

---

## 4. 共有画面（ShareView）

### 目的
- 今日の色や金継ぎ日記を画像化
- SNSで共有

### UI構成

| UI要素 | コンポーネント | 詳細 |
|--------|----------------|------|
| プレビューCanvas | Canvas | 今日の色 + 日記 + 金継ぎ演出を描画 |
| 共有ボタン | ShareLink | 画像としてSNS投稿可能 |

### データフロー
DailyEntry(今日分) → Canvas描画 → 画像生成 → ShareLinkで共有

yaml
コードをコピーする

### アニメーション
- 共有時は静止画化するためアニメーションは省略
- 過去金継ぎの表現を描画に反映

---

## ポイント
- 自己観察と時間的価値化を軸に画面設計
- ひび割れ・金線・光・花のアニメーションを適切に配置
- 過去ブルー日がハッピーで価値化される演出を体験の中心に据える
