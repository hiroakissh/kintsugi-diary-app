一日一色 × Kintsugi Diary（設計書）
# 一日一色 × Kintsugi Diary

## 1. SwiftUI画面フロー



┌─────────────────────┐
│ ホーム画面 │
│ - 今日の色を選択 │
│ - 今日の金継ぎ日記入力 │
│ - 最近1週間のグラデーション│
└─────────┬───────────┘
│タップ
▼
┌─────────────────────┐
│ 金継ぎ日記詳細画面 │
│ - 入力済テキスト表示 │
│ - ひび割れアニメーション │
│ - reflectionText入力 │
│ - 光・花演出 │
│ - 過去ブルーの金継ぎ化 │
└─────────┬───────────┘
│タップ
▼
┌─────────────────────┐
│ 年間グラデーションビュー │
│ - 365日の色タイル表示 │
│ - 金継ぎ進行中の日は部分金線 │
│ - タップで詳細画面に遷移 │
└─────────┬───────────┘
│ShareLink
▼
┌─────────────────────┐
│ 共有画面 │
│ - 今日の色/日記を画像化 │
│ - SNSに投稿可能 │
└─────────────────────┘


---

## 2. 画面ごとの詳細設計

### 2-1. ホーム画面
- **ColorPicker**：今日の色選択
- **TextEditor**：辛い出来事（日記入力）
- **金継ぎひび割れプレビュー**：入力直後にCanvasで描画
- **最近1週間のグラデーション**：横スクロールで表示
- **保存ボタン**：保存と金継ぎ生成、過去ブルーへのリンク判定

### 2-2. 金継ぎ日記詳細画面
- **ひび割れアニメーション**：Canvasで線を描画
- **healedProgressに応じて金線を伸ばす**
- **reflectionText入力**：
  - 入力時に光や花の粒子アニメーション
  - 過去ブルー日を金色に変化
- **タイムラインビュー**：
  - 過去のブルー日がハッピーで金継ぎ化される過程を可視化

### 2-3. 年間グラデーションビュー
- **LazyVGrid**で365日タイル表示
- 色は日々の感情
- 金継ぎ進行中の日は部分的に金線表示
- タップで詳細画面に遷移

### 2-4. 共有画面
- Canvasを使い今日の色＋金継ぎ日記を画像化
- ShareLinkでSNSに投稿可能

---

## 3. 金継ぎアニメーション設計

### 3-1. ひび割れ生成
- 入力時にランダム割れ目生成（Voronoi / Perlin Noise）
- Canvasで描画
- crackGenerated = true に更新

### 3-2. 金線進行
- `healedProgress`（0.0〜1.0）に応じて金線描画
- 後続ポジティブ入力で過去ブルー日をリンク
- Canvas Pathを使い線が徐々に伸びるアニメーション

### 3-3. 光・花演出
- reflectionText入力で粒子発火
- ランダム方向に散らし時間でフェードアウト
- SwiftUI Canvas or Metalで描画
- 過去ブルー日を金色に変える演出も同時再生

---

## 4. データフロー設計



[ホーム画面入力] → 保存 → DailyEntry生成/更新
│
├─> 金継ぎひび割れ生成
├─> 過去ブルー日とのリンク判定
└─> healedProgress更新

[年間グラデーションビュー] ← DailyEntry参照
[金継ぎ日記詳細画面] ← DailyEntry参照・アニメーション制御


---

## 5. 重要ポイント
- 過去ブルー日が後のハッピーで価値化される体験を軸にUI設計
- 時間経過 × 感情の重なりを可視化
- 端末内完結で自己観察を重視
- SNSシェアは補助機能
